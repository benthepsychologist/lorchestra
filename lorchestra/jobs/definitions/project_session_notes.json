{
  "job_id": "project_session_notes",
  "job_type": "file_projection",
  "source": {
    "sqlite_path": "~/clinical-vault/local.db",
    "query": "SELECT c.client_folder, s.session_num, d.content, d.idem_key, d.document_id, d.session_id, d.client_id, d.doc_type FROM clinical_documents d JOIN sessions s ON d.session_id = s.session_id JOIN clients c ON d.client_id = c.client_id WHERE d.content IS NOT NULL AND d.doc_type = 'soap-note' ORDER BY c.client_folder, s.session_num"
  },
  "sink": {
    "base_path": "~/clinical-vault/views",
    "path_template": "{client_folder}/sessions/session-{session_num}/session-note.md",
    "content_template": "{content}",
    "front_matter": {
      "source_type": "clinical_document",
      "entity": "cre92_clientsessions",
      "record_id": "{session_id}",
      "record_id_field": "cre92_clientsessionid",
      "projected_at": "{_projected_at}",
      "idem_key": "{idem_key}",
      "editable_fields": {"cre92_clientsessionnote": "body"}
    }
  }
}
