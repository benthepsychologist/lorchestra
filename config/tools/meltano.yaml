extractors:
  tap-gmail:
    name: tap-gmail
    variant: meltanolabs
    pip_url: meltanolabs-tap-gmail
    python: python3.11
    executable: tap-gmail
    capabilities:
    - state
    - catalog
    - discover
    settings:
    - name: client_id
      kind: string
      description: OAuth 2.0 Client ID from Google Cloud Console
      sensitive: true
    - name: client_secret
      kind: string
      description: OAuth 2.0 Client Secret from Google Cloud Console
      sensitive: true
    - name: refresh_token
      kind: string
      description: OAuth 2.0 Refresh Token (obtained via OAuth flow)
      sensitive: true
    - name: user_id
      kind: string
      description: Gmail account email address
    - name: messages.q
      kind: string
      description: Gmail search query to filter messages (optional)
    - name: include_spam_trash
      kind: boolean
      value: false
      description: Include SPAM and TRASH folders (default false)
  tap-gmail--acct1-personal:
    name: tap-gmail--acct1-personal
    inherit_from: tap-gmail
    config:
      user_id: ben@getmensio.com
      oauth_credentials:
        client_id: ${TAP_GMAIL_ACCT1_PERSONAL_CLIENT_ID}
        client_secret: ${TAP_GMAIL_ACCT1_PERSONAL_CLIENT_SECRET}
        refresh_token: ${TAP_GMAIL_ACCT1_PERSONAL_REFRESH_TOKEN}
      messages:
        q: after:2025/11/12
    select:
    - message_list.*
    - messages.*.*
    - '!messages.raw'
  tap-gmail--acct2-business1:
    name: tap-gmail--acct2-business1
    inherit_from: tap-gmail
    config:
      user_id: drben@benthepsychologist.com
      oauth_credentials:
        client_id: ${TAP_GMAIL_ACCT2_BUSINESS1_CLIENT_ID}
        client_secret: ${TAP_GMAIL_ACCT2_BUSINESS1_CLIENT_SECRET}
        refresh_token: ${TAP_GMAIL_ACCT2_BUSINESS1_REFRESH_TOKEN}
      messages:
        q: after:2025/11/12
    select:
    - '!message_list.*.*'
    - messages.*.*
  tap-gmail--acct3-bfarmstrong:
    name: tap-gmail--acct3-bfarmstrong
    inherit_from: tap-gmail
    config:
      user_id: bfarmstrong@gmail.com
      oauth_credentials:
        client_id: ${TAP_GMAIL_ACCT3_BFARMSTRONG_CLIENT_ID}
        client_secret: ${TAP_GMAIL_ACCT3_BFARMSTRONG_CLIENT_SECRET}
        refresh_token: ${TAP_GMAIL_ACCT3_BFARMSTRONG_REFRESH_TOKEN}
      messages:
        q: after:2025/11/12
    select:
    - '!message_list.*.*'
    - messages.*.*
  tap-msgraph-mail:
    name: tap-msgraph-mail
    namespace: tap_msgraph_mail
    python: python3.11
    pip_url: -e taps/tap-msgraph-mail
    executable: tap-msgraph-mail
    capabilities:
    - state
    - catalog
    - discover
    settings:
    - name: tenant_id
      kind: string
      description: Azure AD Tenant ID (GUID or domain.onmicrosoft.com)
    - name: client_id
      kind: string
      description: Azure App Registration Client ID
      sensitive: true
    - name: user_email
      kind: string
      description: User email address (or 'me' for authenticated user)
    - name: token_cache_path
      kind: string
      description: Path to token cache file
    - name: start_date
      kind: date_iso8601
      description: Earliest record date to sync (for backfill)
  tap-msgraph-mail--ben-mensio:
    name: tap-msgraph-mail--ben-mensio
    inherit_from: tap-msgraph-mail
    config:
      tenant_id: ${TAP_MSGRAPH_BEN_MENSIO_TENANT_ID}
      client_id: ${TAP_MSGRAPH_BEN_MENSIO_CLIENT_ID}
      user_email: ben@mensiomentalhealth.com
      token_cache_path: .tokens/graph_token_cache_ben_mensio.bin
  tap-msgraph-mail--booking-mensio:
    name: tap-msgraph-mail--booking-mensio
    inherit_from: tap-msgraph-mail
    config:
      tenant_id: ${TAP_MSGRAPH_BOOKING_MENSIO_TENANT_ID}
      client_id: ${TAP_MSGRAPH_BOOKING_MENSIO_CLIENT_ID}
      user_email: booking@mensiomentalhealth.com
      token_cache_path: .tokens/graph_token_cache_booking_mensio.bin
  tap-msgraph-mail--info-mensio:
    name: tap-msgraph-mail--info-mensio
    inherit_from: tap-msgraph-mail
    config:
      tenant_id: ${TAP_MSGRAPH_INFO_MENSIO_TENANT_ID}
      client_id: ${TAP_MSGRAPH_INFO_MENSIO_CLIENT_ID}
      user_email: info@mensiomentalhealth.com
      token_cache_path: .tokens/graph_token_cache_info_mensio.bin
  tap-msgraph-mail--ben-efs:
    name: tap-msgraph-mail--ben-efs
    inherit_from: tap-msgraph-mail
    config:
      tenant_id: ${TAP_MSGRAPH_BEN_EFS_TENANT_ID}
      client_id: ${TAP_MSGRAPH_BEN_EFS_CLIENT_ID}
      user_email: ben@evidencefirstsolutions.com
      token_cache_path: .tokens/graph_token_cache_ben_efs.bin
  tap-dataverse:
    name: tap-dataverse
    namespace: tap_dataverse
    python: python3.11
    pip_url: -e taps/tap-dataverse
    executable: tap-dataverse
    capabilities:
    - state
    - catalog
    - discover
    settings:
    - name: tenant_id
      kind: string
      description: Azure AD Tenant ID (GUID or domain.onmicrosoft.com)
    - name: client_id
      kind: string
      description: Azure App Registration Client ID
      sensitive: true
    - name: dataverse_url
      kind: string
      description: Dataverse environment URL (e.g., https://org.crm.dynamics.com)
    - name: token_cache_path
      kind: string
      description: Path to token cache file
    - name: start_date
      kind: date_iso8601
      description: Earliest record date to sync (for backfill)
    - name: tables
      kind: array
      description: List of tables to extract with entity_name, primary_key, replication_key
    config:
      tenant_id: ${TAP_DATAVERSE_TENANT_ID}
      client_id: ${TAP_DATAVERSE_CLIENT_ID}
      dataverse_url: ${TAP_DATAVERSE_URL}
      token_cache_path: .tokens/dataverse_token_cache.bin
      tables:
      - entity_name: contacts
        primary_key: contactid
        replication_key: modifiedon
      - entity_name: cre92_clientsessions
        primary_key: cre92_clientsessionid
        replication_key: modifiedon
      - entity_name: cre92_clientreports
        primary_key: cre92_clientreportid
        replication_key: modifiedon
      - entity_name: cre92_messagelogs
        primary_key: cre92_messagelogid
        replication_key: createdon
      - entity_name: cre92_paymentlogs
        primary_key: cre92_paymentlogid
        replication_key: createdon
      - entity_name: cre92_scheduledpayments
        primary_key: cre92_scheduledpaymentid
        replication_key: modifiedon
    select:
    - contacts.*
  tap-stripe:
    name: tap-stripe
    variant: singer-io
    pip_url: git+https://github.com/singer-io/tap-stripe.git
    config:
      client_secret: ${TAP_STRIPE_API_KEY}
      start_date: ${TAP_STRIPE_START_DATE}
      account_id: ${TAP_STRIPE_ACCOUNT_ID}
  tap-monarch-money:
    name: tap-monarch-money
    namespace: tap_monarch_money
    python: python3.11
    pip_url: -e taps/tap-monarch-money
    executable: tap-monarch-money
    capabilities:
    - state
    - catalog
    - discover
    config:
      email: ${TAP_MONARCH_EMAIL}
      password: ${TAP_MONARCH_PASSWORD}
      transaction_limit: 10000
  tap-google-sheets:
    name: tap-google-sheets
    variant: matatika
    pip_url: git+https://github.com/Matatika/tap-google-sheets.git
    capabilities:
    - catalog
    - discover
    - state
    settings:
    - name: oauth_credentials.client_id
      kind: string
      description: Google OAuth client ID
      sensitive: true
    - name: oauth_credentials.client_secret
      kind: string
      description: Google OAuth client secret
      sensitive: true
    - name: oauth_credentials.refresh_token
      kind: string
      description: Google OAuth refresh token
      sensitive: true
    - name: sheet_id
      kind: string
      description: Google Sheets document ID (from URL)
      sensitive: true
    - name: child_sheet_name
      kind: string
      description: Name of specific sheet tab within the document
    - name: output_name
      kind: string
      description: Name for the output stream/table
  tap-google-sheets--initial-1:
    name: tap-google-sheets--initial-1
    inherit_from: tap-google-sheets
    config:
      oauth_credentials:
        client_id: ${TAP_GOOGLE_SHEETS_CLIENT_ID}
        client_secret: ${TAP_GOOGLE_SHEETS_CLIENT_SECRET}
        refresh_token: ${TAP_GOOGLE_SHEETS_REFRESH_TOKEN}
      sheet_id: ${TAP_GOOGLE_SHEETS_INITIAL_1_SHEET_ID}
      output_name: initial_1_questionnaire
  tap-google-sheets--initial-2:
    name: tap-google-sheets--initial-2
    inherit_from: tap-google-sheets
    config:
      oauth_credentials:
        client_id: ${TAP_GOOGLE_SHEETS_CLIENT_ID}
        client_secret: ${TAP_GOOGLE_SHEETS_CLIENT_SECRET}
        refresh_token: ${TAP_GOOGLE_SHEETS_REFRESH_TOKEN}
      sheet_id: ${TAP_GOOGLE_SHEETS_INITIAL_2_SHEET_ID}
      output_name: initial_2_questionnaire
  tap-google-sheets--followup:
    name: tap-google-sheets--followup
    inherit_from: tap-google-sheets
    config:
      oauth_credentials:
        client_id: ${TAP_GOOGLE_SHEETS_CLIENT_ID}
        client_secret: ${TAP_GOOGLE_SHEETS_CLIENT_SECRET}
        refresh_token: ${TAP_GOOGLE_SHEETS_REFRESH_TOKEN}
      sheet_id: ${TAP_GOOGLE_SHEETS_FOLLOWUP_SHEET_ID}
      output_name: followup_questionnaire
  tap-quickbooks:
    name: tap-quickbooks
    variant: hotgluexyz
    pip_url: git+https://github.com/hotgluexyz/tap-quickbooks.git
    capabilities:
    - discover
    - properties
    - state
    settings:
    - name: client_id
      kind: string
      description: QuickBooks OAuth client ID
      sensitive: true
    - name: client_secret
      kind: string
      description: QuickBooks OAuth client secret
      sensitive: true
    - name: refresh_token
      kind: string
      description: QuickBooks OAuth refresh token
      sensitive: true
    - name: realm_id
      kind: string
      description: QuickBooks company/realm ID
    - name: is_sandbox
      kind: boolean
      description: Use QuickBooks sandbox environment
      default: false
    - name: start_date
      kind: date_iso8601
      description: Earliest transaction date to sync
    - name: max_workers
      kind: integer
      description: Maximum number of threads for parallel extraction
      default: 8
  tap-quickbooks--ben-personal:
    name: tap-quickbooks--ben-personal
    inherit_from: tap-quickbooks
    config:
      client_id: ${TAP_QUICKBOOKS_BEN_PERSONAL_CLIENT_ID}
      client_secret: ${TAP_QUICKBOOKS_BEN_PERSONAL_CLIENT_SECRET}
      refresh_token: ${TAP_QUICKBOOKS_BEN_PERSONAL_REFRESH_TOKEN}
      realm_id: ${TAP_QUICKBOOKS_BEN_PERSONAL_REALM_ID}
      is_sandbox: false
      start_date: '2024-01-01T00:00:00Z'
  tap-quickbooks--mensio-cad:
    name: tap-quickbooks--mensio-cad
    inherit_from: tap-quickbooks
    config:
      client_id: ${TAP_QUICKBOOKS_MENSIO_CAD_CLIENT_ID}
      client_secret: ${TAP_QUICKBOOKS_MENSIO_CAD_CLIENT_SECRET}
      refresh_token: ${TAP_QUICKBOOKS_MENSIO_CAD_REFRESH_TOKEN}
      realm_id: ${TAP_QUICKBOOKS_MENSIO_CAD_REALM_ID}
      is_sandbox: false
      start_date: '2024-01-01T00:00:00Z'
loaders:
  target-jsonl:
    name: target-jsonl
    variant: andyh1203
    pip_url: target-jsonl
    executable: target-jsonl
    settings:
    - name: destination_path
      kind: string
      value: output/
      description: Output directory (local path or GCS bucket gs://...)
    - name: do_timestamp_file
      kind: boolean
      value: false
      description: Add timestamp to output filename
  target-jsonl-chunked:
    name: target-jsonl-chunked
    namespace: target_jsonl_chunked
    python: python3.11
    pip_url: -e targets/target-jsonl-chunked
    executable: target-jsonl-chunked
    settings:
    - name: root
      kind: string
      description: Vault root directory
    - name: source_name
      kind: string
      description: Source identifier (e.g., 'email/gmail')
    - name: account_label
      kind: string
      description: Account identifier (e.g., 'drben')
    - name: max_bytes_gz
      kind: integer
      value: 50000000
      description: Maximum compressed bytes per chunk (default 50MB)
    - name: compression_level
      kind: integer
      value: 1
      description: Gzip compression level 1-9 (default 1 for speed)
    - name: run_id_env
      kind: string
      value: RUN_ID
      description: Environment variable name for run_id
    - name: tmp_dirname
      kind: string
      value: _tmp
      description: Temporary directory name within run path
  target-jsonl-chunked--gmail-ben-mensio:
    name: target-jsonl-chunked--gmail-ben-mensio
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: email/gmail
      account_label: ben-mensio
  target-jsonl-chunked--gmail-drben:
    name: target-jsonl-chunked--gmail-drben
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: email/gmail
      account_label: drben
  target-jsonl-chunked--gmail-ben-personal:
    name: target-jsonl-chunked--gmail-ben-personal
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: email/gmail
      account_label: ben-personal
  target-jsonl-chunked--exchange-ben-mensio:
    name: target-jsonl-chunked--exchange-ben-mensio
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: email/exchange
      account_label: ben-mensio
  target-jsonl-chunked--exchange-booking-mensio:
    name: target-jsonl-chunked--exchange-booking-mensio
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: email/exchange
      account_label: booking-mensio
  target-jsonl-chunked--exchange-info-mensio:
    name: target-jsonl-chunked--exchange-info-mensio
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: email/exchange
      account_label: info-mensio
  target-jsonl-chunked--exchange-ben-efs:
    name: target-jsonl-chunked--exchange-ben-efs
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: email/exchange
      account_label: ben-efs
  target-jsonl-chunked--dataverse:
    name: target-jsonl-chunked--dataverse
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: dataverse
      account_label: mensio
  target-jsonl-chunked--stripe:
    name: target-jsonl-chunked--stripe
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: stripe
      account_label: benthepsychologist
  target-jsonl-chunked--monarch-money:
    name: target-jsonl-chunked--monarch-money
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: monarch-money
      account_label: ben-personal
  target-jsonl-chunked--google-sheets-initial-1:
    name: target-jsonl-chunked--google-sheets-initial-1
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: questionnaires/google-sheets
      account_label: initial-1
  target-jsonl-chunked--google-sheets-initial-2:
    name: target-jsonl-chunked--google-sheets-initial-2
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: questionnaires/google-sheets
      account_label: initial-2
  target-jsonl-chunked--google-sheets-followup:
    name: target-jsonl-chunked--google-sheets-followup
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: questionnaires/google-sheets
      account_label: followup
  target-jsonl-chunked--quickbooks-ben-personal:
    name: target-jsonl-chunked--quickbooks-ben-personal
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: financial/quickbooks
      account_label: ben-personal
  target-jsonl-chunked--quickbooks-mensio-cad:
    name: target-jsonl-chunked--quickbooks-mensio-cad
    inherit_from: target-jsonl-chunked
    config:
      root: /home/user/phi-data/vault
      source_name: financial/quickbooks
      account_label: mensio-cad
jobs:
- name: ingest-all-accounts
  tasks:
  - tap-gmail--acct1-personal target-jsonl-chunked--gmail-ben-mensio
  - tap-gmail--acct2-business1 target-jsonl-chunked--gmail-drben
  - tap-gmail--acct3-bfarmstrong target-jsonl-chunked--gmail-ben-personal
  - tap-msgraph-mail--ben-mensio target-jsonl-chunked--exchange-ben-mensio
  - tap-msgraph-mail--booking-mensio target-jsonl-chunked--exchange-booking-mensio
  - tap-msgraph-mail--info-mensio target-jsonl-chunked--exchange-info-mensio
  - tap-msgraph-mail--ben-efs target-jsonl-chunked--exchange-ben-efs
  - tap-dataverse target-jsonl-chunked--dataverse
- name: ingest-gmail-only
  tasks:
  - tap-gmail--acct1-personal target-jsonl-chunked--gmail-ben-mensio
  - tap-gmail--acct2-business1 target-jsonl-chunked--gmail-drben
  - tap-gmail--acct3-bfarmstrong target-jsonl-chunked--gmail-ben-personal
- name: ingest-exchange-only
  tasks:
  - tap-msgraph-mail--ben-mensio target-jsonl-chunked--exchange-ben-mensio
  - tap-msgraph-mail--booking-mensio target-jsonl-chunked--exchange-booking-mensio
  - tap-msgraph-mail--info-mensio target-jsonl-chunked--exchange-info-mensio
  - tap-msgraph-mail--ben-efs target-jsonl-chunked--exchange-ben-efs
- name: ingest-dataverse-only
  tasks:
  - tap-dataverse target-jsonl-chunked--dataverse
- name: ingest-stripe-only
  tasks:
  - tap-stripe target-jsonl-chunked--stripe
- name: ingest-monarch-money
  tasks:
  - tap-monarch-money target-jsonl-chunked--monarch-money
- name: ingest-google-sheets
  tasks:
  - tap-google-sheets--initial-1 target-jsonl-chunked--google-sheets-initial-1
  - tap-google-sheets--initial-2 target-jsonl-chunked--google-sheets-initial-2
  - tap-google-sheets--followup target-jsonl-chunked--google-sheets-followup
- name: ingest-quickbooks
  tasks:
  - tap-quickbooks--ben-personal target-jsonl-chunked--quickbooks-ben-personal
  - tap-quickbooks--mensio-cad target-jsonl-chunked--quickbooks-mensio-cad
environments:
  dev:
    name: dev
    config:
      plugins:
        loaders:
        - name: target-jsonl
          config:
            destination_path: /home/user/phi-data/meltano-extracts/
  staging:
    name: staging
    config:
      plugins:
        loaders:
        - name: target-jsonl
          config:
            destination_path: gs://org1-raw-test/
  prod:
    name: prod
    config:
      plugins:
        loaders:
        - name: target-jsonl
          config:
            destination_path: gs://org1-raw-prod/
meltano_dir: /home/user/meltano-ingest
synced_at: '2025-11-13T18:38:00.500673Z'
